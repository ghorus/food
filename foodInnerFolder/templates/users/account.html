{% extends 'layout.html' %}
{% block content %}
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <p class={{category}}>{{message}}</p>
            {% endfor %}
        {% endif %}
    {% endwith %}
    <h1>{{ current_user.username}}</h1>
    <h1>{{current_user.email}}</h1>
    <h1><img src="{{image_file}}" style="width:100px; border-radius:50%;"></h1>
    <!--enctype is to pass image file properly-->
    <form method="POST" action="" enctype="multipart/form-data" novalidate>
        {{form.hidden_tag()}}
        {{form.username.label}}
        {{form.username}}
        {% if form.username.errors %}
            {% for error in form.username.errors %}
                {{error}}
            {% endfor %}
        {% endif %}
        {{form.email.label}}
        {{form.email}}
        {% if form.email.errors %}
            {% for error in form.email.errors %}
                {{error}}
            {% endfor %}
        {% endif %}
        {{form.picture.label}}
        {{form.picture}}
        {% if form.picture.errors %}
                {% for error in form.picture.errors %}
                    {{error}}
                {% endfor %}
            {% endif %}
        {{form.submit}}
    </form>
{% endblock content %}